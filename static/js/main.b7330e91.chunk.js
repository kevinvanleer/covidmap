(this.webpackJsonpcovidmap=this.webpackJsonpcovidmap||[]).push([[0],{105:function(e,t,a){e.exports=a(130)},115:function(e,t,a){},130:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),c=a.n(o),i=a(35),l=a(53),s=a.n(l),u=(a(115),a(4)),d=a(8),p=a.n(d),f=a(1),m=a(15),b=a(10);function g(){var e=Object(m.a)(["\n  color: ",";\n  text-decoration: none;\n\n  &:visited {\n    color: ",";\n  }\n\n  &:hover {\n    color: cyan;\n  }\n\n  &:active {\n    color: #1790a7;\n  }\n\n  &:focus {\n    color: cyan;\n  }\n"]);return g=function(){return e},e}var y=b.a.a(g(),(function(e){return e.color}),(function(e){return e.color}));y.defaultProps={color:"#38c9e4"};var h=function(e){var t=e.onHide;return r.a.createElement(f.d,{flexDirection:"column",backgroundColor:"#444",color:"#eee",padding:"1em",maxWidth:"80ch",margin:"1em"},r.a.createElement(f.i,{fontSize:"heading"},"About this visualization"),r.a.createElement(f.g,{height:"1.5em"}),r.a.createElement("div",{style:{overflow:"auto"}},r.a.createElement(f.i,null,"COVID-19 cases and deaths are displayed as blue and red choropleths as reported by the New York Times. Onset, the date of the first case in each county are represented by green icons. Hotspots are displays as red icons. The geographic visuals are rendered with MapBox. The charts are built with D3."),r.a.createElement(f.g,{height:"1em"}),r.a.createElement(f.i,{fontSize:"label"},"Statistics explained"),r.a.createElement(f.g,{height:"0.2em"}),r.a.createElement(f.i,null,"Hotspots by total cases: Hotspots are those counties that have at least 100 cases and in which total cases have increased 20% in the past two weeks."),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(f.i,null,"Hotspots Per Capita: Hotspots are those counties in which at least 1% of the population has been infected in the past two weeks."),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(f.i,null,"New cases are those reported on most recent day for the county, typically yesterday."),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(f.i,null,"Ongoing cases is an estimate represented by cases reported within the past two weeks."),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(f.i,null,"Death rate compares the current number of deaths to the total number of cases two weeks prior."),r.a.createElement(f.g,{height:"1em"}),r.a.createElement(f.i,{fontSize:"label"},"Data sources"),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(f.i,null,"US 2010 census boundaries"),r.a.createElement(y,{href:"https://eric.clst.org/tech/usgeojson/"},r.a.createElement(f.i,{fontSize:"detail"},"https://eric.clst.org/tech/usgeojson/")),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(f.i,null,"Global country boundaries: Data Packaged Core Datasets"),r.a.createElement(y,{href:"https://github.com/datasets/geo-countries"},r.a.createElement(f.i,{fontSize:"detail"},"Find it on GitHub")),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(f.i,null,"2019 US Population Estimates: US Census Bureau"),r.a.createElement(y,{href:"https://www2.census.gov/programs-surveys/popest/datasets/2010-2019/counties/totals/co-est2019-alldata.csv"},r.a.createElement(f.i,{fontSize:"detail"},"Download raw CSV file")),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(f.i,null,"Global Population Estimates: World Bank"),r.a.createElement(y,{href:"https://data.worldbank.org/indicator/SP.POP.TOTL"},r.a.createElement(f.i,{fontSize:"detail"},"https://data.worldbank.org/indicator/SP.POP.TOTL")),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(f.i,null,"US Cases and deaths, The New York Times, based on reports from state and local health agencies:"),r.a.createElement(y,{href:"https://github.com/nytimes/covid-19-data"},r.a.createElement(f.i,{fontSize:"detail"},"https://github.com/nytimes/covid-19-data")),r.a.createElement(y,{href:"https://www.nytimes.com/interactive/2020/us/coronavirus-us-cases.html"},r.a.createElement(f.i,{fontSize:"detail"},"New York Times interactive tracking page")),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(f.i,null,"Global COVID-19 cases and deaths: World Health Organization"),r.a.createElement(y,{href:"https://covid19.who.int/WHO-COVID-19-global-data.csv"},r.a.createElement(f.i,{fontSize:"detail"},"Download raw CSV file")),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(f.i,null,"Source code"),r.a.createElement(y,{href:"https://github.com/kevinvanleer/covidmap"},r.a.createElement(f.i,{fontSize:"detail"},"https://github.com/kevinvanleer/covidmap")),r.a.createElement(y,{href:"https://github.com/kevinvanleer/coviddata"},r.a.createElement(f.i,{fontSize:"detail"},"https://github.com/kevinvanleer/coviddata")),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(f.i,{fontSize:"detail"},"Assembled by Kevin Van Leer. Feedback welcome at:"),r.a.createElement(y,{href:"mailto:kevin.vanleer@gmail.com"},"kevin.vanleer@gmail.com"),r.a.createElement(f.g,{height:"1em"})),r.a.createElement(f.g,{height:"1em"}),r.a.createElement(f.a,{id:"covidmap-about-hide-self",onClick:t},r.a.createElement(f.i,{color:"#eee"},"Dismiss")))},v=a(5);function O(){var e=Object(m.a)(["\n  position: absolute;\n  & > * {\n    flex-shrink: 0;\n  }\n"]);return O=function(){return e},e}var j=Object(b.a)(f.d)(O());j.defaultProps={zIndex:10,flexDirection:"column",backgroundColor:"#444",color:"#eee",padding:"1em"};var E=a(16),w=function(e){var t=e.id,a=e.onClick,n=e.icon,o=e.active;return r.a.createElement(f.h,{id:t,onClick:a,backgroundColor:o?"#777":"#333"},r.a.createElement(E.a,{icon:n,color:o?"#eee":"#777",fixedWidth:!0}))};function C(){var e=Object(m.a)(["\n  transform-origin: bottom left;\n  ","\n\n  @keyframes pulse {\n    0%,\n    100% {\n      transform: scale(1);\n    }\n    25% {\n      transform: scale(1.02);\n    }\n    75% {\n      transform: scale(0.98);\n    }\n  }\n"]);return C=function(){return e},e}var x=b.a.div(C(),(function(e){var t=e.progress;return 0===t?"animation: pulse 2s ease infinite;":"transform: scale(".concat(1-t,");\n        transition: transform 1s ease-in-out;")})),I="LOADING_PENDING",k="LOADING_LOADING",S="LOADING_COMPLETE",D={status:null,success:null,error:null,result:null},P=a(11),L=window.matchMedia("(max-width: 600px)"),N=Object(P.c)({name:"controlPanel",initialState:{layersHidden:L.matches,detailsHidden:L.matches,collapsed:L.matches,showAbout:!1},reducers:{collapse:function(e,t){!t.payload&&e.collapsed&&e.layersHidden&&e.detailsHidden&&(e.layersHidden=!1,e.detailsHidden=!1),e.collapsed=t.payload},expand:function(e){e.collapsed&&e.layersHidden&&e.detailsHidden&&(e.layersHidden=!1,e.detailsHidden=!1),e.collapsed=!1},showLayers:function(e){e.layersHidden=!1},hideLayers:function(e,t){t.payload&&e.detailsHidden&&(e.collapsed=!0),e.layersHidden=t.payload},showDetails:function(e){e.detailsHidden=!1},hideDetails:function(e,t){t.payload&&e.layersHidden&&(e.collapsed=!0),e.detailsHidden=t.payload},setShowAbout:function(e,t){e.showAbout=t.payload}}}),T=N.actions,z=T.collapse,A=(T.expand,T.hideLayers),M=(T.showLayers,T.hideDetails),Y=(T.showDetails,T.setShowAbout),F=N.reducer,G=function(e){var t=e.layers,a=e.activeLayers,o=e.onShowAbout,c=e.date,i=Object(u.b)(),l=Object(u.c)((function(e){return e.ui.controlPanel.collapsed})),s=Object(u.c)((function(e){return e.ui.controlPanel.layersHidden})),d=Object(u.c)((function(e){return e.ui.controlPanel.detailsHidden})),m=Object(u.c)((function(e){return e.ui.map.mapLoadStatus.status!==S})),b=Object(u.c)((function(e){return e.ui.map.sourcesLoadStatus.status!==S})),g=Object(u.c)((function(e){return e.request.usCasesByCounty.progress})),y=Object(n.useCallback)((function(){return i(A(!s))}),[s,i]),h=Object(n.useCallback)((function(){return i(M(!d))}),[d,i]),O=Object(n.useCallback)((function(){return i(z(!l))}),[l,i]),E=null,C=b||m?0:g;return g<1&&(E="Downloading pandemic statistics..."),0===g&&(E="Requesting pandemic statistics..."),b&&(E="Downloading boundary tiles..."),m&&(E="Initializing base map..."),r.a.createElement(j,{width:"min-content",right:"1em",top:"1em",maxHeight:"calc(100% - 4em)",maxWidth:"calc(100% - 4em)",backgroundColor:"rgba(68,68,68,0.85)",zIndex:100},r.a.createElement(f.d,{alignItems:"center"},r.a.createElement(f.i,{nowrap:!0,fontSize:"heading"},"COVID-19"),r.a.createElement(f.g,{width:"1em",flexGrow:1}),r.a.createElement(f.d,{marginBetween:"0.2em",alignItems:"center"},r.a.createElement(f.h,{id:"covidmap-show-about-box",onClick:o,backgroundColor:"#777"},r.a.createElement(f.e,{color:"#eee",icon:v.i,fixedWidth:!0})),r.a.createElement(f.g,{width:"0.1em",flexGrow:1}),r.a.createElement(w,{id:"button-covidmap-control-panel-hide-layers",flexGrow:0,onClick:y,icon:v.j,active:!s,backgroundColor:"#777"}),r.a.createElement(w,{id:"button-covidmap-control-panel-hide-details",flexGrow:0,onClick:h,icon:v.b,active:!d,backgroundColor:"#777"}),r.a.createElement(f.g,{width:"0.1em",flexGrow:1}),r.a.createElement(St,{id:"button-covidmap-control-panel-collapse",flexGrow:0,color:"white",onClick:O,collapsed:l,backgroundColor:"#777"}))),r.a.createElement(f.c,{horizontal:!0,margin:"0.5em 0"}),r.a.createElement(f.d,{flexDirection:"column",style:{flexShrink:1},overflow:"hidden auto"},s?null:r.a.createElement("div",null,r.a.createElement(It,{layers:t,activeLayers:a,collapsed:l}),r.a.createElement(f.c,{horizontal:!0,margin:"0.5em 0"})),d?r.a.createElement(f.g,{width:"325px"}):r.a.createElement("div",null,r.a.createElement(yt,{date:p()(c),collapsed:l}))),r.a.createElement(Q,null),E?r.a.createElement(f.d,{flexDirection:"column"},r.a.createElement(f.g,{height:"1em"}),r.a.createElement(x,{progress:C},E)):null)},V=a(17),B=a(58);function H(){var e=Object(m.a)(["\n  text-decoration: none;\n  cursor: pointer;\n\n  & > *:hover {\n    background-color: #777;\n  }\n"]);return H=function(){return e},e}var _=Object(b.a)(f.d)(H());_.defaultProps={flexDirection:"column"};a(121);var R=Object(P.b)("time/updateCurrentTime",(function(e,t){var a=e.timestamp,n=e.previous,r=t.dispatch,o=(0,t.getState)().core.time,c=100;o.pause||(c=0,n||(n=a),r(Z(a-n))),window.requestAnimationFrame((function(e){return setTimeout((function(){return r(R(e,a))}),c)}))})),W=(Object(P.b)("time/startPlayback",(function(e){var t=e.dispatch;return window.requestAnimationFrame((function(e){return t(R(e))}))})),Object(P.c)({name:"time",initialState:{min:parseInt(p()("2020-01-01").format("x")),max:parseInt(p()().subtract(1,"days").format("x")),current:parseInt(p()().subtract(1,"days").format("x")),duration:null,pause:!0,rate:0},reducers:{setCurrent:function(e,t){e.current=parseInt(t.payload)},tick:function(e,t){var a;e.current>=e.max?a=e.min:(a=e.current+t.payload*e.rate)>e.max&&(a=e.max),e.current=a},togglePlayPause:function(e){e.pause=!e.pause,e.rate=e.pause?0:864e3},setMax:function(e,t){e.max=t.payload},setMin:function(e,t){e.min=t.payload},setRate:function(e,t){e.rate=t.payload},setPause:function(e,t){e.pause=t.pause},setDuration:function(e,t){e.duration=t.payload}}})),U=W.actions,q=U.setCurrent,Z=U.tick,J=(U.setMax,U.setMin,U.setRate,U.setPause,U.setDuration),K=U.togglePlayPause,X=W.reducer,Q=function(e){var t,a,o,c=e.withChart,i=Object(u.b)(),l=Object(u.c)((function(e){return e.core.time})),s=Object(n.useState)(!1),d=Object(V.a)(s,2),m=d[0],b=d[1],g=Object(n.useCallback)((function(e){return i(q(e))}),[i]),y=Object(n.useCallback)((function(e){return i(J(e))}),[i]),h=Object(n.useCallback)((function(){return i(K())}),[i]);return r.a.createElement(f.d,{margin:c?"0 0 0 30px":"0",flexDirection:"column"},r.a.createElement(B.a,{min:l.min,max:l.max,onChange:g,value:l.current}),r.a.createElement(f.d,null,r.a.createElement(f.h,{id:"button-legend-play-pause",onClick:h,backgroundColor:"#777"},r.a.createElement(E.a,{color:"#eee",icon:0===l.rate?v.m:v.l})),r.a.createElement(f.g,{width:"1em"}),r.a.createElement(f.d,{position:"relative"},r.a.createElement(w,{id:"button-legend-time-filter",onClick:function(){return b(!m)},active:!m,icon:v.e}),m?r.a.createElement(f.f,{backgroundColor:"#222",bottom:"36px",left:"36px",flexDirection:"column",padding:"0.5em 0",handleClick:function(){}},r.a.createElement(_,null,r.a.createElement(f.i,{onClick:function(){y(p.a.duration(7,"days")),b(!1)},bold:7===(null===(t=l.duration)||void 0===t?void 0:t.asDays()),padding:"0.5em 1em",nowrap:!0},"7 days"),r.a.createElement(f.i,{onClick:function(){y(p.a.duration(14,"days")),b(!1)},bold:14===(null===(a=l.duration)||void 0===a?void 0:a.asDays()),padding:"0.5em 1em",nowrap:!0},"14 days"),r.a.createElement(f.i,{onClick:function(){y(p.a.duration(30,"days")),b(!1)},bold:30===(null===(o=l.duration)||void 0===o?void 0:o.asDays()),padding:"0.5em 1em",nowrap:!0},"30 days"),r.a.createElement(f.i,{onClick:function(){y(null),b(!1)},bold:null===l.duration,padding:"0.5em 1em",nowrap:!0},"off"))):null),r.a.createElement(f.g,{flexGrow:1}),r.a.createElement(f.i,null,p()(l.current,"x").format("YYYY-MM-DD"))))},$=a(3),ee=a(2),te=function(e){var t=e.label,a=e.value,n=e.popupDescription,o=e.showPopup,c=e.onShowPopup,i=e.bottom,l=e.right,s=e.middle;return r.a.createElement(f.d,{flexDirection:"column",onClick:function(){return c(!o)},style:{cursor:"help"}},o?r.a.createElement(f.f,{left:s?"6ch":l?void 0:"0",right:l?"0":void 0,bottom:i?"2em":"4em",handleClick:function(){return c(!1)}},r.a.createElement(f.d,{backgroundColor:"#222",padding:"0.5em"},r.a.createElement(f.i,{maxWidth:"30ch",fontSize:"detail"},n))):null,r.a.createElement(f.i,{fontSize:"detail",bold:!0},"".concat("NaN"!==new Intl.NumberFormat("en-US").format(a)?new Intl.NumberFormat("en-US").format(a):a)),r.a.createElement(f.i,{fontSize:"0.6em"},t.toUpperCase()))},ae=function(e){var t=e.collapsed,a=e.recentData,o=e.newCases,c=e.ongoingCases,i=e.population,l=Object(n.useState)({population:!1,ongoing:!1,cases:!1,deaths:!1,newCases:!1,deathRate:!1}),s=Object(V.a)(l,2),u=s[0],d=s[1],p=function(e,t){var a=Object(ee.a)({},u);!1===t?a[e]=!1:(Object.keys(a).forEach((function(e){a[e]=!1})),a[e]=!0),d(a)};return t?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(f.d,{position:"relative"},r.a.createElement(f.d,{flexDirection:"column"},r.a.createElement(te,{value:Object($.get)(i,"POPESTIMATE2019",0),label:"population",popupDescription:"2019 population estimate provided by the United States Census Bureau",showPopup:u.population,onShowPopup:function(e){return p("population",e)}}),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(te,{value:c,label:"ongoing cases",popupDescription:"Cases reported within 14 days of the displayed date",showPopup:u.ongoing,onShowPopup:function(){return p("ongoing",!u.ongoing)},bottom:!0})),r.a.createElement(f.g,{width:"0.1em",flexGrow:"1"}),r.a.createElement(f.d,{flexDirection:"column"},r.a.createElement(te,{value:Object($.get)(a,"deaths",0),label:"total deaths",popupDescription:"Total deaths as reported by The New York Times on the displayed date",showPopup:u.deaths,onShowPopup:function(){return p("deaths",!u.deaths)},middle:!0}),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(te,{value:Object($.get)(a,"cases",0),label:"total cases",popupDescription:"Total cases as reported by The New York Times on the displayed date",showPopup:u.cases,onShowPopup:function(){return p("cases",!u.cases)},bottom:!0,middle:!0})),r.a.createElement(f.g,{width:"0.1em",flexGrow:"1"}),r.a.createElement(f.d,{flexDirection:"column"},r.a.createElement(te,{value:Math.round(Object($.get)(a,"deaths",0)/Object($.get)(i,"POPESTIMATE2019",0)*1e5),label:"Deaths per 100k",popupDescription:"Number of deaths that have occurred, normalized to a population of 100,000 individuals",showPopup:u.deathRate,onShowPopup:function(){return p("deathRate",!u.deathRate)},right:!0}),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(te,{value:o,label:"New cases",popupDescription:"Cases reported on the displayed date",showPopup:u.newCases,onShowPopup:function(){return p("newCases",!u.newCases)},bottom:!0,right:!0}))))},ne=a(12),re=function(e){var t=e.height,a=e.width,o=e.data,c=e.currentDate,i=e.currentValue,l=e.showIntercept,s=Object(n.useRef)(null),u=.035*t,d=Object.assign(o.slice(1).map((function(e){var t=e.date,a=e.cases,n=e.deaths;return{date:p()(t),cases:a,deaths:n}})),{y:"Cases"});return Object(n.useEffect)((function(){var e=20,n=0,r=30,f=30;if(o&&s.current){var m=ne.k(s.current);m.selectAll("*").remove();var b=ne.j().domain([p()("2020-01-01","YYYY-MM-DD"),p()().subtract(1,"days")]).range([f,a-n]),g=ne.i().domain([0,Math.max(Object($.get)(Object($.last)(d),"cases",0),10)]).nice().range([t-r,e]),y=ne.d,h=ne.a().curve(y).x((function(e){return b(e.date)})).y0(g(0)).y1((function(e){return g(e.cases)})),v=ne.a().curve(y).x((function(e){return b(e.date)})).y0(g(0)).y1((function(e){return g(e.deaths)}));m.append("path").datum(d).attr("fill","steelblue").attr("d",h),m.append("path").datum(d).attr("fill","red").attr("d",v),m.append("g").call((function(e){return e.attr("transform","translate(0,".concat(t-r,")")).call(ne.b(b).ticks(5).tickFormat(ne.l("%b")).tickSizeOuter(0))})),m.append("g").call((function(e){return e.attr("transform","translate(".concat(f,",0)")).call(ne.c(g).ticks(u,"s")).call((function(e){return e.select(".domain").remove()})).call((function(e){return e.select(".tick:last-of-type text").clone().attr("x",3).attr("text-anchor","start").attr("font-weight","bold").text(d.y)}))}));if(c&&!Object($.isEmpty)(o)){m.append("line").attr("x1",b(c)).attr("x2",b(c)).attr("y1",t-r).attr("y2",g(i)+2).style("stroke-width",1).style("stroke","#ccc").style("fill","none"),m.append("circle").attr("cx",b(c)).attr("cy",g(i)).attr("r",2).style("stroke-width",1).style("stroke","#ccc").style("fill","none")}l&&d[0]&&(m.append("line").attr("x1",b(d[0].date)).attr("x2",b(d[0].date)).attr("y1",t-r).attr("y2",t/2).style("stroke-width",1).style("stroke","#ccc").style("fill","none"),m.append("text").attr("x",b(d[0].date)).attr("y",t/2-5).text(d[0].date.format("MMM D")).attr("text-anchor","middle").attr("font-family","sans-serif").attr("font-size","10px").attr("fill","#eee")),Object($.isEmpty)(o)&&m.append("text").attr("x",a/2).attr("y",t/2).text("No data").attr("text-anchor","middle").attr("font-family","sans-serif").attr("font-size","20px").attr("fill","#eee")}}),[o,d,t,a,u,c,i,l]),r.a.createElement("svg",{className:"area-chart-container",width:a,height:t,role:"img",ref:s,pointerEvents:"none"})};re.defaultProps={height:200,width:300,data:[],currentValue:0};var oe=re,ce=function(e){var t=e.data,a=e.dataDimensions,o=e.average,c=e.xLabel,i=e.yLabel,l=e.height,s=e.width,u=e.color,d=e.activeLayers,p=e.setActiveLayer,f=e.horizontal,m=e.labelBars,b=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=f?{category:"y",magnitude:"x"}:{category:"x",magnitude:"y"},n=f?{category:"height",magnitude:"width"}:{category:"width",magnitude:"height"},r=f?{category:l,magnitude:s}:{category:s,magnitude:l},d=f?7*s/300:7*l/200,p=o?Math.max(1.5*o,10):10,g=m?{top:5,right:0,bottom:30,left:10}:{top:20,right:0,bottom:30,left:30};if(t&&b.current){var y=ne.k(b.current);y.selectAll("*").remove();var h=ne.h().domain(ne.g(t.length)).range(f?[g.top,l-g.bottom]:[g.left,s-g.right]).padding(.1),v=ne.i().domain([0,Object($.isEmpty)(t)?p:Math.max(ne.f(t,(function(e){return e[a.magnitude]})),p)]).nice().range(f?[g.left,s-g.right-g.left]:[l-g.bottom,g.top]);if(y.append("g").selectAll("rect").data(t).join("rect").attr("fill",u).attr(e.category,(function(e,t){return h(t)})).attr(e.magnitude,(function(e){return v(f?0:e[a.magnitude])})).attr(n.magnitude,(function(e){return f?v(e[a.magnitude])-g.left:v(0)-v(e[a.magnitude])})).attr(n.category,h.bandwidth()),m){var O=.7*h.bandwidth(),j=(h.bandwidth()+O)/2-2;y.append("g").selectAll("rect").data(t).join("text").attr(e.category,(function(e,t){return h(t)+j})).attr(e.magnitude,g.left+5).text((function(e){return e[a.category].toUpperCase()})).attr("text-anchor","left").attr("font-family","sans-serif").attr("font-size",O).attr("fill","#eee")}if(y.append("g").call((function(e){return f?m?e.attr("transform","translate(".concat(g.left,",0)")).call(ne.c(h).tickFormat((function(){return null})).tickSize(0)):e.attr("transform","translate(".concat(g.left,",0)")).call(ne.c(h).tickFormat((function(e){return t[e][a.category]})).tickSizeOuter(0)).call((function(e){return e.select(".tick:first-of-type text").clone().attr("x",-10).attr("text-anchor","end").attr("font-weight","bold").text(c)})):e.attr("transform","translate(0,".concat(l-g.bottom,")")).call(ne.b(h).tickFormat((function(e){return t[e][a.category]})).tickSizeOuter(0)).call((function(e){return e.select(".tick:first-of-type text").clone().attr("x",-10).attr("text-anchor","end").attr("font-weight","bold").text(c)}))})),y.append("g").call((function(e){return f?e.attr("transform","translate(0,".concat(l-g.bottom,")")).call(ne.b(v).ticks(d,ne.e("s"))).call((function(e){return e.select(".domain").remove()})).call((function(e){return e.select(".tick:last-of-type text").clone().attr("x",-s/2).attr("y",20).attr("text-anchor","start").attr("font-weight","bold").text(i)})):e.attr("transform","translate(".concat(g.left,",0)")).call(ne.c(v).ticks(d,ne.e("s"))).call((function(e){return e.select(".domain").remove()})).call((function(e){return e.select(".tick:last-of-type text").clone().attr("x",3).attr("text-anchor","start").attr("font-weight","bold").text(i)}))})),Object($.isEmpty)(t)&&y.append("text").attr(e.category,r.category/2).attr(e.magnitude,r.magnitude/2).text("No data").attr("text-anchor","middle").attr("font-family","sans-serif").attr("font-size","20px").attr("fill","#eee"),void 0!==o){var E=l-g.bottom-g.top+5;y.append("line").attr("x1",g.left).attr("x2",s-g.right).attr("y1",v(o)).attr("y2",v(o)).style("stroke-width",1).style("stroke","#ccc").style("fill","none"),y.append("text").attr(e.category,g.left).attr(e.magnitude,v(o)+(v(o)<E?10:-5)).text("30-DAY US AVERAGE").attr("text-anchor","left").attr("font-family","sans-serif").attr("font-size","8px").attr("fill","#ccc")}}}),[t,u,d,p,f,m,l,s,c,i,o,a]),r.a.createElement("svg",{className:"area-chart-container",width:s,height:l,role:"img",ref:b})};ce.defaultProps={data:[],setActiveLayer:function(){return null},color:"steelblue",height:200,width:300,dataDimensions:{category:"date",magnitude:"value"}};var ie=ce,le=a(6),se=function e(t){return 0===t?1:t*e(t-1)},ue=function(e,t,a){return function(e,t){return se(e)/(se(t)*se(e-t))}(3,t)*Math.pow(1-e,3-t)*Math.pow(e,t)*a},de=function(e){return function(t){return e.reduce((function(e,a,n){return e+ue(t,n,a)}))}},pe=function(e,t,a,n){return function(r){for(var o=.5,c=1,i=0,l=function(e,t,a,n){return function(r){var o=e.x,c=e.y,i=t.x,l=t.y,s=a.x,u=a.y,d=n.x,p=n.y;return{x:de([o,i,s,d])(r),y:de([c,l,u,p])(r)}}}(e,t,a,n),s=function(e){return r>e?(i=o,o+(c-o)/2):(c=o,o-(o-i)/2)},u=0;;){var d=l(o);if(Math.abs(d.x-r)<1e-6||u>1e5)return d.y;o=s(d.x),u++}}},fe=[0,1,.2,.9],me=fe,be=[0,0,1e7,.8,1e10,.8],ge=[0,0,5e6,.8,5e7,.8],ye=[0,0,1e4,.8],he=[0,0,5e5,.8],ve=[0,.5,.3,.6],Oe=[0,0,.2,.8,1,.8],je=[0,0,.005,.8,1,.8],Ee=function(e,t){return[{x:e[0],y:e[1]},{x:t[0]*e[2],y:t[1]*e[3]},{x:t[2]*e[2],y:t[3]*e[3]},{x:e[2],y:e[3]}]},we=pe.apply(void 0,Object(le.a)(Ee(Oe,ve))),Ce=pe.apply(void 0,Object(le.a)(Ee(je,ve))),xe=pe.apply(void 0,Object(le.a)(Ee(he,ve))),Ie=pe.apply(void 0,Object(le.a)(Ee(ye,ve))),ke=pe.apply(void 0,Object(le.a)(Ee(ge,fe))),Se=pe({x:0,y:0},{x:0,y:.8},{x:2e6,y:.72},{x:1e7,y:.8}),De=pe({x:0,y:0},{x:0,y:.8},{x:3e8,y:.48},{x:1e9,y:.8}),Pe=[{magnitude:5e3,opacity:ke(5e3)},{magnitude:5e4,opacity:ke(5e4)},{magnitude:5e5,opacity:ke(5e5)},{magnitude:5e6,opacity:.8}],Le=[{magnitude:"2%",opacity:we(.02)},{magnitude:"5%",opacity:we(.05)},{magnitude:"10%",opacity:we(.1)},{magnitude:"20%",opacity:we(.2)}],Ne=[{magnitude:".01%",opacity:Ce(1e-4)},{magnitude:".05%",opacity:Ce(5e-4)},{magnitude:".1%",opacity:Ce(.001)},{magnitude:".5%",opacity:Ce(.005)}],Te=[{magnitude:1e4,opacity:Se(1e4)},{magnitude:1e5,opacity:Se(1e5)},{magnitude:1e6,opacity:Se(1e6)},{magnitude:1e7,opacity:.8}],ze=[{magnitude:1e6,opacity:De(1e6)},{magnitude:1e7,opacity:De(1e7)},{magnitude:1e8,opacity:De(1e8)},{magnitude:1e9,opacity:.8}],Ae={covidVsFlu:{mutex:!0,gradient:[{magnitude:"FLU",opacity:.8,fillColor:"#3bebff"},{magnitude:"",opacity:.4,fillColor:"#3bebff"},{magnitude:"0",fillColor:"#ffd400",opacity:0},{magnitude:"",fillColor:"#ffd400",opacity:.4},{magnitude:"CVD",fillColor:"#ffd400",opacity:.8}]},covidVsAvg:{mutex:!0,gradient:[{magnitude:"LOW",opacity:.8,fillColor:"#3bebff"},{magnitude:"",opacity:.4,fillColor:"#3bebff"},{magnitude:"AVG",fillColor:"#ffd400",opacity:0},{magnitude:"",fillColor:"#ffd400",opacity:.4},{magnitude:"HIGH",fillColor:"#ffd400",opacity:.8}]},infectionRate:{fillColor:"#ff9a00",gradient:[{magnitude:"1%",opacity:.1},{magnitude:"5%",opacity:.5},{magnitude:"10%",opacity:.7},{magnitude:"20%",opacity:.8}]}},Me=Object(ee.a)(Object(ee.a)({},Ae),{},{population:{defaultDisabled:!0,fillColor:"#0f0",gradient:[{magnitude:1e4,opacity:Se(1e4)},{magnitude:1e5,opacity:Se(1e5)},{magnitude:1e6,opacity:Se(1e6)},{magnitude:1e7,opacity:.8}]},statePopulation:{defaultDisabled:!0,fillColor:"#0f0",gradient:[{magnitude:1e4,opacity:Se(1e4)},{magnitude:1e5,opacity:Se(1e5)},{magnitude:1e6,opacity:Se(1e6)},{magnitude:5e8,opacity:.8}]},usStateTotalCases:{fillColor:"#00f",gradient:Pe},usStateTotalDeaths:{fillColor:"#f00",gradient:Pe},deaths:{fillColor:"#f00",gradient:[{magnitude:10,opacity:Ie(10)},{magnitude:100,opacity:Ie(100)},{magnitude:1e3,opacity:Ie(1e3)},{magnitude:1e4,opacity:Ie(1e4)}]},cases:{fillColor:"#00f",gradient:[{magnitude:100,opacity:xe(100)},{magnitude:1e3,opacity:xe(1e3)},{magnitude:1e4,opacity:xe(1e4)},{magnitude:1e5,opacity:xe(1e5)}]}}),Ye=Object(ee.a)(Object(ee.a)({},Ae),Me),Fe={source:"admin-levels","source-layer":"admin0"},Ge={source:"us-admin-levels","source-layer":"admin1"},Ve={source:"us-admin-levels","source-layer":"admin2"},Be=[],He=function(e,t){return Be.push({source:{source:e.source,sourceLayer:e["source-layer"]},layer:"".concat(t,"-base")}),[Object(ee.a)(Object(ee.a)({id:"".concat(t,"-base"),type:"fill"},e),{},{paint:{"fill-color":"transparent"}}),Object(ee.a)(Object(ee.a)({id:"".concat(t,"-outline-base"),type:"line"},e),{},{paint:{"line-color":["case",["feature-state","hold"],"#0f0","#e842dc"],"line-width":["interpolate",["linear"],["zoom"],3,2,10,4],"line-opacity":["to-number",["feature-state","active"]]}})]},_e=[Object(ee.a)(Object(ee.a)({id:"world-per-capita-cases",type:"fill"},Fe),{},{legend:{label:"Cases",icon:v.h,fillColor:"#00f",gradient:Le},paint:{"fill-color":["case",["==",["feature-state","casesPerCapita"],null],"#777","#00f"],"fill-opacity":["interpolate",["cubic-bezier"].concat(ve),["feature-state","casesPerCapita"]].concat(Oe)}}),Object(ee.a)(Object(ee.a)({id:"world-per-capita-deaths",legend:{label:"Deaths",icon:v.o,fillColor:"#f00",gradient:Ne},type:"fill"},Fe),{},{paint:{"fill-color":["case",["==",["feature-state","deathsPerCapita"],null],"#777","#f00"],"fill-opacity":["interpolate",["cubic-bezier"].concat(ve),["feature-state","deathsPerCapita"]].concat(je)}}),Object(ee.a)(Object(ee.a)({id:"world-cases",type:"fill"},Fe),{},{legend:{label:"Cases",icon:v.h,fillColor:"#00f",gradient:Te},paint:{"fill-color":["case",["==",["feature-state","cases"],null],"#777","#00f"],"fill-opacity":["interpolate",["cubic-bezier"].concat(me),["feature-state","cases"]].concat(be)}}),Object(ee.a)(Object(ee.a)({id:"world-deaths",legend:{label:"Deaths",icon:v.o,fillColor:"#f00",gradient:Te},type:"fill"},Fe),{},{paint:{"fill-color":["case",["==",["feature-state","deaths"],null],"#777","#f00"],"fill-opacity":["interpolate",["cubic-bezier"].concat(me),["feature-state","deaths"]].concat(be)}})].concat(Object(le.a)(He(Fe,"countries")),[Object(ee.a)(Object(ee.a)({legend:{label:"Population",icon:v.p,defaultDisabled:!0,fillColor:"#0f0",gradient:ze},id:"world-country-population",type:"fill"},Fe),{},{paint:{"fill-color":["case",["==",["feature-state","population"],null],"#777","#0f0"],"fill-opacity":["interpolate",["cubic-bezier",0,1,.3,.6],["feature-state","population"],0,0,1e9,.8,1e14,.8]}})]),Re=[Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Cases vs Avg",icon:v.a},Ye.covidVsAvg),{},{zoomLevels:[Number.NEGATIVE_INFINITY,4]}),id:"us-state-cases-vs-avg",type:"fill"},Ge),{},{paint:{"fill-color":["interpolate",["linear"],["feature-state","casesPerCapita"],0,["rgba",58,235,255,.8],.0018,["rgba",58,235,255,.8],.01799,["rgba",58,235,255,0],.018,["rgba",255,212,0,0],.18,["rgba",255,212,0,.8],1,["rgba",255,212,0,.8]]}}),Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Deaths vs Avg",icon:v.a},Ye.covidVsAvg),{},{zoomLevels:[Number.NEGATIVE_INFINITY,4]}),id:"us-state-deaths-vs-avg",type:"fill"},Ge),{},{paint:{"fill-color":["interpolate",["linear"],["feature-state","deathsPerCapita"],0,["rgba",58,235,255,.8],56e-6,["rgba",58,235,255,.8],5599e-7,["rgba",58,235,255,0],56e-5,["rgba",255,212,0,0],.0056,["rgba",255,212,0,.8],1,["rgba",255,212,0,.8]]}}),Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Deaths vs Flu",icon:v.a},Ye.covidVsFlu),{},{zoomLevels:[Number.NEGATIVE_INFINITY,4]}),id:"us-state-deaths-vs-flu",type:"fill"},Ge),{},{paint:{"fill-color":["interpolate",["linear"],["feature-state","deathsPerCapita"],0,["rgba",58,235,255,.8],1e-5,["rgba",58,235,255,.8],9e-5,["rgba",58,235,255,0],1e-4,["rgba",255,212,0,0],.001,["rgba",255,212,0,.8],1,["rgba",255,212,0,.8]]}}),Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Cases vs Flu",icon:v.a},Ye.covidVsFlu),{},{zoomLevels:[Number.NEGATIVE_INFINITY,4]}),id:"us-state-cases-vs-flu",type:"fill"},Ge),{},{paint:{"fill-color":["interpolate",["linear"],["feature-state","casesPerCapita"],0,["rgba",58,235,255,.8],.01,["rgba",58,235,255,.8],.09,["rgba",58,235,255,0],.1,["rgba",255,212,0,0],.2,["rgba",255,212,0,.8],1,["rgba",255,212,0,.8]]}}),Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Infection rate",icon:v.a},Ye.infectionRate),{},{zoomLevels:[Number.NEGATIVE_INFINITY,4]}),id:"us-state-infection-rate",type:"fill"},Ge),{},{paint:{"fill-color":Ye.infectionRate.fillColor,"fill-opacity":["interpolate",["linear"],["feature-state","casesPerCapita"],0,0,.01,.1,.02,.2,.05,.5,.1,.7,.2,.8,1,.8]}}),Object(ee.a)(Object(ee.a)({legend:{label:"Deaths",icon:v.o,fillColor:"#f00",gradient:Ne,zoomLevels:[Number.NEGATIVE_INFINITY,4]},id:"us-state-per-capita-deaths",type:"fill"},Ge),{},{paint:{"fill-color":["case",["==",["feature-state","deathsPerCapita"],null],"#777","#f00"],"fill-opacity":["interpolate",["cubic-bezier"].concat(ve),["feature-state","deathsPerCapita"]].concat(je)}}),Object(ee.a)(Object(ee.a)({legend:{label:"Cases",icon:v.h,fillColor:"#00f",gradient:Le,zoomLevels:[Number.NEGATIVE_INFINITY,4]},id:"us-state-per-capita-cases",type:"fill"},Ge),{},{paint:{"fill-color":["case",["==",["feature-state","casesPerCapita"],null],"#777","#00f"],"fill-opacity":["interpolate",["cubic-bezier"].concat(ve),["feature-state","casesPerCapita"]].concat(Oe)}}),Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Deaths",icon:v.o},Ye.usStateTotalDeaths),{},{zoomLevels:[Number.NEGATIVE_INFINITY,4]}),id:"us-state-total-deaths",type:"fill"},Ge),{},{paint:{"fill-color":["case",["==",["feature-state","deaths"],null],"#777","#f00"],"fill-opacity":["interpolate",["cubic-bezier"].concat(fe),["feature-state","deaths"]].concat(ge)}}),Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Cases",icon:v.h},Ye.usStateTotalCases),{},{zoomLevels:[Number.NEGATIVE_INFINITY,4]}),id:"us-state-total-cases",type:"fill"},Ge),{},{paint:{"fill-color":["case",["==",["feature-state","cases"],null],"#777","#00f"],"fill-opacity":["interpolate",["cubic-bezier"].concat(fe),["feature-state","cases"]].concat(ge)}}),Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Population",icon:v.p},Ye.statePopulation),{},{defaultDisabled:!0,zoomLevels:[Number.NEGATIVE_INFINITY,4]}),id:"us-state-population",type:"fill"},Ge),{},{paint:{"fill-color":["case",["==",["feature-state","population"],null],"#777","#0f0"],"fill-opacity":["interpolate",["cubic-bezier",0,1,.2,.9],["feature-state","population"],0,0,5e8,.8,1e10,.8]}})].concat(Object(le.a)(He(Ge,"us-states"))),We=[Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Cases vs Avg",icon:v.a},Ye.covidVsAvg),{},{zoomLevels:[4,Number.POSITIVE_INFINITY]}),id:"us-county-cases-vs-avg",type:"fill"},Ve),{},{paint:{"fill-color":["interpolate",["linear"],["feature-state","casesPerCapita"],0,["rgba",58,235,255,.8],.0018,["rgba",58,235,255,.8],.01799,["rgba",58,235,255,0],.018,["rgba",255,212,0,0],.18,["rgba",255,212,0,.8],1,["rgba",255,212,0,.8]]}}),Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Deaths vs Avg",icon:v.a},Ye.covidVsAvg),{},{zoomLevels:[4,Number.POSITIVE_INFINITY]}),id:"us-county-deaths-vs-avg",type:"fill"},Ve),{},{paint:{"fill-color":["interpolate",["linear"],["feature-state","deathsPerCapita"],0,["rgba",58,235,255,.8],56e-6,["rgba",58,235,255,.8],5599e-7,["rgba",58,235,255,0],56e-5,["rgba",255,212,0,0],.0056,["rgba",255,212,0,.8],1,["rgba",255,212,0,.8]]}}),Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Deaths vs Flu",icon:v.a},Ye.covidVsFlu),{},{zoomLevels:[4,Number.POSITIVE_INFINITY]}),id:"us-county-deaths-vs-flu",type:"fill"},Ve),{},{paint:{"fill-color":["interpolate",["linear"],["feature-state","deathsPerCapita"],0,["rgba",58,235,255,.8],1e-5,["rgba",58,235,255,.8],9e-5,["rgba",58,235,255,0],1e-4,["rgba",255,212,0,0],.001,["rgba",255,212,0,.8],1,["rgba",255,212,0,.8]]}}),Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Cases vs Flu",icon:v.a},Ye.covidVsFlu),{},{zoomLevels:[4,Number.POSITIVE_INFINITY]}),id:"us-county-cases-vs-flu",type:"fill"},Ve),{},{paint:{"fill-color":["interpolate",["linear"],["feature-state","casesPerCapita"],0,["rgba",58,235,255,.8],.01,["rgba",58,235,255,.8],.09,["rgba",58,235,255,0],.1,["rgba",255,212,0,0],.2,["rgba",255,212,0,.8],1,["rgba",255,212,0,.8]]}}),Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Infection rate",icon:v.a},Ye.infectionRate),{},{zoomLevels:[4,Number.POSITIVE_INFINITY]}),id:"us-county-infection-rate",type:"fill"},Ve),{},{paint:{"fill-color":Ye.infectionRate.fillColor,"fill-opacity":["interpolate",["linear"],["feature-state","casesPerCapita"],0,0,.01,.1,.02,.2,.05,.5,.1,.7,.2,.8,1,.8]}}),Object(ee.a)(Object(ee.a)({legend:{label:"Deaths",icon:v.o,fillColor:"#f00",gradient:Ne,zoomLevels:[4,Number.POSITIVE_INFINITY]},id:"us-county-per-capita-deaths",type:"fill"},Ve),{},{paint:{"fill-color":["case",["==",["feature-state","deathsPerCapita"],null],"#777","#f00"],"fill-opacity":["interpolate",["cubic-bezier"].concat(ve),["feature-state","deathsPerCapita"]].concat(je)}}),Object(ee.a)(Object(ee.a)({legend:{label:"Cases",icon:v.h,fillColor:"#00f",gradient:Le,zoomLevels:[4,Number.POSITIVE_INFINITY]},id:"us-county-per-capita-cases",type:"fill"},Ve),{},{paint:{"fill-color":["case",["==",["feature-state","casesPerCapita"],null],"#777","#00f"],"fill-opacity":["interpolate",["cubic-bezier"].concat(ve),["feature-state","casesPerCapita"]].concat(Oe)}}),Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Deaths",icon:v.o},Ye.deaths),{},{zoomLevels:[4,Number.POSITIVE_INFINITY]}),id:"us-county-total-deaths",type:"fill"},Ve),{},{paint:{"fill-color":["case",["==",["feature-state","deaths"],null],"#777","#f00"],"fill-opacity":["interpolate",["cubic-bezier"].concat(ve),["feature-state","deaths"]].concat(ye)}}),Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Cases",icon:v.h},Ye.cases),{},{zoomLevels:[4,Number.POSITIVE_INFINITY]}),id:"us-county-total-cases",type:"fill"},Ve),{},{paint:{"fill-color":["case",["==",["feature-state","cases"],null],"#777","#00f"],"fill-opacity":["interpolate",["cubic-bezier"].concat(ve),["feature-state","cases"]].concat(he)}}),Object(ee.a)(Object(ee.a)({legend:Object(ee.a)(Object(ee.a)({label:"Population",icon:v.p},Ye.population),{},{zoomLevels:[4,Number.POSITIVE_INFINITY]}),id:"us-county-population",type:"fill"},Ve),{},{paint:{"fill-color":["case",["==",["feature-state","population"],null],"#777","#0f0"],"fill-opacity":["interpolate",["cubic-bezier",0,1,.2,.9],["feature-state","population"],0,0,1e7,.8,1e10,.8]}})].concat(Object(le.a)(He(Ve,"us-counties")),[{legend:{label:"Hotspots",icon:v.r},id:"us-hotspots",type:"symbol",source:"us-county-centroids",layout:{"icon-image":"corona-red","icon-size":["interpolate",["linear"],["zoom"],3,.1,20,1],"icon-ignore-placement":!0},paint:{"icon-opacity":["to-number",["feature-state","hotspot"]],"icon-color":"red"}},{legend:{label:"Hotspots",icon:v.r},id:"us-per-capita-hotspots",type:"symbol",source:"us-county-centroids",layout:{"icon-image":"corona-red","icon-size":["interpolate",["linear"],["zoom"],3,.1,20,1],"icon-ignore-placement":!0},paint:{"icon-opacity":["to-number",["feature-state","perCapitaHotspot"]],"icon-color":"red"}},{legend:{label:"Onset",icon:v.q},id:"us-first-case",type:"symbol",source:"us-county-centroids",layout:{"icon-image":"corona-green","icon-size":["interpolate",["linear"],["zoom"],3,.2,20,1],"icon-ignore-placement":!0},paint:{"icon-opacity":["to-number",["feature-state","firstCase"]],"icon-color":"red"}},{id:"us-county-names",type:"symbol",source:"us-county-centroids",minzoom:7,layout:{"text-field":["get","NAME"],"text-ignore-placement":!0},paint:{"text-halo-color":"#fff","text-halo-width":1}}]),Ue=[{id:"admin-levels",config:{type:"vector",url:"mapbox://ruokvl.admin-levels",promoteId:"ISO_A2"}},{id:"us-admin-levels",config:{type:"vector",url:"mapbox://ruokvl.us-admin-levels"}},{id:"us-county-centroids",config:{type:"geojson",data:"/api/us-county-centroids"}}],qe=[].concat(Object(le.a)(Re),Object(le.a)(We)),Ze=[].concat(Object(le.a)(_e),Object(le.a)(qe)),Je=function(){return qe.filter((function(e){return void 0===e.legend})).map((function(e){return e.id}))},Ke=function(){return _e.filter((function(e){return void 0===e.legend})).map((function(e){return e.id}))},Xe={us:[{name:"Per Capita",layers:["us-county-per-capita-deaths","us-county-per-capita-cases","us-state-per-capita-deaths","us-state-per-capita-cases","us-per-capita-hotspots","us-first-case","us-county-population","us-state-population"].concat(Object(le.a)(Je()))},{name:"Total",layers:["us-county-total-deaths","us-county-total-cases","us-state-total-deaths","us-state-total-cases","us-hotspots","us-first-case"].concat(Object(le.a)(Je()))},{name:"Misc",layers:["us-county-infection-rate","us-county-cases-vs-flu","us-county-cases-vs-avg","us-county-deaths-vs-flu","us-county-deaths-vs-avg","us-per-capita-hotspots","us-county-population","us-state-infection-rate","us-state-cases-vs-flu","us-state-cases-vs-avg","us-state-deaths-vs-flu","us-state-deaths-vs-avg","us-per-capita-hotspots","us-state-population"].concat(Object(le.a)(Je()))}],world:[{name:"Per Capita",layers:["world-per-capita-deaths","world-per-capita-cases","world-country-population"].concat(Object(le.a)(Ke()))},{name:"Total",layers:["world-deaths","world-cases","world-country-population"].concat(Object(le.a)(Ke()))}]},Qe=Object(P.c)({name:"map",initialState:{hold:!1,selectedFeature:null,mapLoadStatus:Object(ee.a)({},D),sourcesLoadStatus:Object(ee.a)({},D),layersLoadStatus:Object(ee.a)({},D),map:null,layerGroups:Xe.us,layers:Ze,selectedLayerGroup:Xe.us[0],views:Object.keys(Xe).map((function(e){return{name:e}})),activeView:{name:"us"},activeLayers:Ze.filter((function(e){var t,a;return!(null===e||void 0===e||null===(t=e.legend)||void 0===t?void 0:t.mutex)&&!(null===e||void 0===e||null===(a=e.legend)||void 0===a?void 0:a.defaultDisabled)})).map((function(e){return e.id}))},reducers:{hold:function(e){e.hold=!0},releaseHold:function(e){e.hold=!1},setHold:function(e,t){e.hold=t.payload},setSelectedFeature:function(e,t){e.selectedFeature=t.payload},beginMapInitialization:function(e){e.mapLoadStatus.status=I,e.sourcesLoadStatus.status=I,e.layersLoadStatus.status=I},beginLoadingMap:function(e,t){e.map=t.payload,e.mapLoadStatus.status=k},mapFinishedLoading:function(e){e.mapLoadStatus.status=S},beginLoadingSources:function(e){e.sourcesLoadStatus.status=k},sourcesFinishedLoading:function(e){e.sourcesLoadStatus.status=S},beginLoadingLayers:function(e){e.layersLoadStatus.status=k},layersFinishedLoading:function(e){e.layersLoadStatus.status=S},selectLayerGroup:function(e,t){e.selectedLayerGroup=t.payload},setActiveLayers:function(e,t){e.activeLayers=t.payload},setActiveView:function(e,t){e.activeView=t.payload,"world"===t.payload.name.toLowerCase()?(e.map.setMinZoom(0),e.map.flyTo({center:[10,25],zoom:1.7})):(e.map.flyTo({center:[-95,39],zoom:4}),e.map.setMinZoom(3)),e.layerGroups=Xe[t.payload.name],e.selectedLayerGroup=Xe[t.payload.name][0],e.hold=!1},updateActiveLayers:function(e,t){var a=t.payload,n=e.activeLayers.includes(a);e.activeLayers=n?e.activeLayers.filter((function(e){return e!==a})):[].concat(Object(le.a)(e.activeLayers),[a])}}}),$e=Qe.actions,et=$e.setHold,tt=($e.hold,$e.releaseHold),at=$e.setSelectedFeature,nt=$e.beginMapInitialization,rt=$e.beginLoadingMap,ot=$e.mapFinishedLoading,ct=$e.beginLoadingSources,it=$e.sourcesFinishedLoading,lt=($e.beingLoadingLayers,$e.layersFinishedLoading,$e.selectLayerGroup),st=$e.setActiveLayers,ut=$e.setActiveView,dt=$e.updateActiveLayers,pt=Qe.reducer,ft={POPESTIMATE2019:328239523},mt=function(e){var t=e.children,a=e.container;return c.a.createPortal(t,a)},bt=function(e,t,a,n,r,o){var c=[],i=t>=1?t:1,l=a>=1?a:1;if(t<1&&o>0&&(c=function(e,t){for(var a=[],n=0;n<t;++n){var r=p()(e).subtract(n,"days").format("YYYY-MM-DD").split("-");a.push({date:"01"===r[2]&&n!==t-1?p.a.monthsShort(parseInt(r[1])-1):r[2],value:0})}return a.reverse()}(p()(r),o-l)),a>=0)for(var s=i;s<=l;++s){var u=Object($.get)(e,[s,"date"]).split("-");c.push({date:"01"===u[2]&&s!==i?p.a.monthsShort(parseInt(u[1])-1):u[2],value:1e5*Math.max((0===s?e[s].cases:e[s].cases-e[s-1].cases)/Object($.get)(n,"POPESTIMATE2019"),0)})}return c},gt=function(e,t,a){if(t){var n=Object($.findLast)(t,(function(t){return t.date<=p()(e).format("YYYY-MM-DD")})),r=Object($.findLast)(t,(function(t){return t.date<=p()(e).subtract(30,"days").format("YYYY-MM-DD")}));return(Object($.get)(n,"cases",0)-Object($.get)(r,"cases",0))/30/a*1e5}return NaN},yt=function(e){var t=e.date,a=e.collapsed,o=Object(n.useState)(!1),c=Object(V.a)(o,2),i=c[0],l=c[1],s=Object(u.b)(),d=Object(u.c)((function(e){return e.core.worldCovidData.totals})),m=Object(u.c)((function(e){return e.core.usCovidData.stateAndCounty})),b=Object(u.c)((function(e){return e.core.usCovidData.byState})),g=Object(u.c)((function(e){return e.core.worldCovidData.byCountry})),y=Object(u.c)((function(e){return e.ui.map.selectedLayerGroup})),h=Object(u.c)((function(e){return e.ui.map.selectedFeature})),O=Object(u.c)((function(e){return e.core.usCovidData.population})),j=Object(u.c)((function(e){return e.core.worldCovidData.population})),w=Object(u.c)((function(e){return e.core.usCovidData.totals})),C=Object(u.c)((function(e){return e.ui.map.activeView})),x=ft,I=v.f;"world"===C.name.toLowerCase()?(x={POPESTIMATE2019:Object($.get)(j,[h,"population"],7713e6)},I=v.g):x=h?O[h]:ft;var k=Object(n.useMemo)((function(){var e=h?{displayName:h<1e3?Object($.get)(Object($.last)(m[h]),"state","Unknown"):"".concat(Object($.get)(Object($.last)(m[h]),"county","Unknown"),", ").concat(Object($.get)(Object($.last)(m[h]),"state","Unknown")),data:m[h]}:{displayName:"United States of America",data:w};return"world"===C.name.toLowerCase()&&(e=h?{displayName:"".concat(Object($.get)(Object($.last)(Object($.get)(g,[h])),"country",Object($.get)(j,[h,"name"],"Unknown"))),data:Object($.get)(g,[h],[])}:{displayName:"Global",data:d}),e}),[h,m,g,C,d,w,j]),S=Object(n.useMemo)((function(){return p()(t).subtract(14,"days").format("MMM")}),[t]),D=Object(n.useMemo)((function(){var e=[];return Object.entries(b).forEach((function(a){var n=Object(V.a)(a,2),r=n[0],o=n[1],c=Object($.findLast)(o,(function(e){return e.date<=t.format("YYYY-MM-DD")}));if(c){var i=Object($.get)(O,[r,"POPESTIMATE2019"]);i&&e.push({id:r,name:"world"===C.name.toLowerCase()?"".concat(c.state,", US"):c.state,deaths:c.deaths/i*1e6,cases:c.cases/i*1e6})}})),"world"===C.name.toLowerCase()&&Object.entries(g).forEach((function(a){var n=Object(V.a)(a,2),r=n[0],o=n[1],c=Object($.findLast)(o,(function(e){return e.date<=t.format("YYYY-MM-DD")}));if(c){var i=Object($.get)(j,[r,"population"]);i&&e.push({id:r,name:c.country,deaths:c.deaths/i*1e6,cases:c.cases/i*1e6})}})),e.sort((function(e,t){return t.deaths-e.deaths}))}),[C,b,O,g,j,t]),P=k.data,L=Object(n.useMemo)((function(){return Object($.findLastIndex)(P,(function(e){return e.date<=t.format("YYYY-MM-DD")}))}),[P,t]),N=Object($.get)(P,[L],{deaths:0,cases:0}),T=Object(n.useMemo)((function(){return Object($.findLast)(P,(function(e){return e.date<=p()(t).subtract(1,"days").format("YYYY-MM-DD")}))}),[P,t]),z=Object(n.useMemo)((function(){return Object($.findLastIndex)(P,(function(e){return e.date<=p()(t).subtract(2,"weeks").format("YYYY-MM-DD")}))}),[P,t]),A=Object($.get)(P,[z],null),M=Object($.get)(N,"cases",0)-Object($.get)(T,"cases",0),Y=Object($.get)(N,"cases",0)-Object($.get)(A,"cases",0),F=Object(n.useMemo)((function(){return bt(P,z,L,x,t,15)}),[P,z,L,x,t]),G=Object(n.useCallback)((function(){s(tt()),s(at(null))}),[s]);return N?r.a.createElement(f.d,{flexDirection:"column"},r.a.createElement(f.d,null,r.a.createElement(f.d,{flexDirection:"column",flexGrow:1},r.a.createElement(f.d,null,r.a.createElement(f.d,{flexDirection:"column",flexGrow:1},r.a.createElement(f.i,{bold:!0,fontSize:"label"},k.displayName),r.a.createElement(f.i,{fontSize:"detail"},N.date?"reporting on ".concat(N.date):"no reported cases")),null!=h?r.a.createElement(f.h,{id:"covid19-button-close-stats",onClick:G,backgroundColor:"#777"},r.a.createElement(E.a,{color:"#eee",icon:I,fixedWidth:!0})):r.a.createElement(f.h,{id:"covid19-button-expand-stats",onClick:function(){return l(!0)},backgroundColor:"#777"},r.a.createElement(E.a,{color:"#eee",icon:v.d,fixedWidth:!0}))),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(ae,{population:x,collapsed:a,entity:k,recentData:N,newCases:M,ongoingCases:Y}))),h||"per capita"!==y.name.toLowerCase()?null:r.a.createElement(ie,{horizontal:!0,labelBars:!0,data:D.slice(0,10).filter((function(e){return e.deaths>=1})),dataDimensions:{category:"name",magnitude:"deaths"},height:a?100:void 0,color:"#ce2029",width:325,yLabel:"deaths in 100k"}),h&&"per capita"===y.name.toLowerCase()?r.a.createElement(ie,{data:F,average:gt(t,w,parseInt(Object($.get)(ft,"POPESTIMATE2019"))),height:a?100:void 0,width:325,yLabel:"cases in 100k",xLabel:S}):null,"per capita"!==y.name.toLowerCase()?r.a.createElement(oe,{data:k.data,currentDate:t,height:a?100:void 0,width:325,currentValue:parseInt(Object($.get)(N,"cases",0)),showIntercept:!0}):null,i?r.a.createElement(mt,{container:document.getElementById("root")},r.a.createElement(f.d,{position:"absolute",backgroundColor:"rgba(0,0,0,0.8)",top:"0",bottom:"0",left:"0",right:"0",zIndex:"1000",alignItems:"center",justifyContent:"center",color:"#eee"},r.a.createElement(f.d,{flexDirection:"column"},r.a.createElement(f.d,null,r.a.createElement(f.d,{flexDirection:"column",flexGrow:1},r.a.createElement(f.i,{bold:!0,fontSize:"label"},k.displayName,": Deaths per capita"),r.a.createElement(f.i,{fontSize:"detail"},N.date?"reporting on ".concat(N.date):"no reported cases")),r.a.createElement(f.g,{flexGrow:1}),r.a.createElement(f.h,{id:"covid19-button-collapse-stats",onClick:function(){return l(!1)},backgroundColor:"#777"},r.a.createElement(E.a,{color:"#eee",icon:v.c,fixedWidth:!0}))),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(ae,{population:x,collapsed:a,entity:k,recentData:N,newCases:M,ongoingCases:Y}),r.a.createElement(f.g,{height:"0.5em"}),r.a.createElement(ie,{horizontal:!0,labelBars:!0,data:D.slice(0,51).filter((function(e){return e.deaths>=1})),dataDimensions:{category:"name",magnitude:"deaths"},height:Math.min(window.innerHeight-150,1080),color:"#ce2029",width:Math.min(window.innerWidth-.05*window.innerWidth,1920),yLabel:"deaths in 1M"})))):null):null},ht=a(28),vt=a.n(ht),Ot=function(e){var t=e.fillColor,a=e.gradient;return r.a.createElement(f.d,{flexDirection:"row",backgroundColor:"#eee"},a.map((function(e,a){var n,o=vt()(e.fillColor||t),c=vt()(o.array().map((function(t){return 238-e.opacity*(238-t)}))),i=c.contrast(vt()("#111")),l=c.contrast(vt()("#eee"));return r.a.createElement(f.i,{key:"".concat(e.magnitude,"-").concat(a),height:"0.6rem",width:"1.5rem",backgroundColor:o.alpha(e.opacity),alignItems:"center",fontSize:"0.5rem",color:i>l?"#111":"#eee",centerAlign:!0,flexGrow:1},(n=e.magnitude)>=1e9?"".concat(n/1e9,"B"):n>=1e6?"".concat(n/1e6,"M"):n>=1e3?"".concat(n/1e3,"k"):n)})))};function jt(){var e=Object(m.a)(["\n  cursor: pointer;\n"]);return jt=function(){return e},e}var Et=Object(b.a)((function(e){var t=e.className,a=e.onClick,n=e.config,o=e.active,c=e.collapsed;return r.a.createElement(f.d,{flexGrow:c?0:1,alignItems:"center",onClick:a},r.a.createElement(f.h,{id:"covidmap-button-layer-item-".concat(n.label.toLowerCase()),onClick:a,backgroundColor:o?"#777":"#333",title:n.label},r.a.createElement(E.a,{size:c?"sm":"lg",icon:n.icon,color:o?"#eee":"#777",fixedWidth:!0})),c?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(f.g,{width:"0.5em"}),r.a.createElement(f.d,{flexDirection:"column"},r.a.createElement(f.i,{fontSize:"label",bold:o,className:t},n.label),n.gradient&&r.a.createElement(Ot,n))))}))(jt());function wt(){var e=Object(m.a)(["\n  border: none;\n  font: inherit;\n  cursor: pointer;\n  outline: inherit;\n  align-items: center;\n  text-align: center;\n  width: ",";\n  height: ",";\n  flex-grow: ",";\n  text-decoration: none;\n  appearance: none;\n  padding: unset;\n  box-sizing: unset;\n\n  background-color: unset;\n  color: unset;\n"]);return wt=function(){return e},e}var Ct=Object(b.a)(f.b)(wt(),(function(e){return e.width}),(function(e){return e.height}),(function(e){return e.flexGrow})),xt=function(e){var t=e.groups,a=e.selectedGroup,n=e.onSelect,o=0;return t.forEach((function(e){return o=Math.max(e.name.length,o)})),r.a.createElement(f.d,{style:{border:"1px solid #777"},flexGrow:1},t.map((function(e,c){return r.a.createElement(r.a.Fragment,{key:"".concat(e.name,"-").concat(c)},r.a.createElement(Ct,{id:"covidmap-multiselect-item-".concat(e.name.toLowerCase()),onClick:function(){return n(e)},flexGrow:1},r.a.createElement(f.d,{flexGrow:1,minWidth:"".concat(o,"ch"),justifyContent:"center",alignItems:"center",backgroundColor:a.name===e.name&&"#777"},r.a.createElement(f.i,{centerAlign:!0,padding:"0.2em",fontSize:"detail"},e.name.toUpperCase()))),c!==t.length-1&&r.a.createElement(f.c,{vertical:!0}))})))},It=function(e){var t=e.layers,a=e.activeLayers,o=e.collapsed,c=Object(u.b)(),i=Object(u.c)((function(e){return e.ui.map.selectedLayerGroup})),l=Object(u.c)((function(e){return e.ui.map.activeView})),s=Object(u.c)((function(e){return e.ui.map.views})),d=Object(u.c)((function(e){return e.ui.map.layerGroups})),p=Object(u.c)((function(e){return e.ui.map.map})),m=p?p.getZoom():0,b=Object(n.useMemo)((function(){return t.filter((function(e){return i.layers.includes(e.id)&&$.inRange.apply(void 0,[m].concat(Object(le.a)(Object($.get)(e,"legend.zoomLevels",[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY]))))}))}),[t,m,i.layers]),g=Object(n.useCallback)((function(e){var t;if((null===e||void 0===e||null===(t=e.legend)||void 0===t?void 0:t.mutex)&&!a.includes(e.id)){var n=b.filter((function(e){var t;return null===e||void 0===e||null===(t=e.legend)||void 0===t?void 0:t.mutex})).map((function(e){return e.id})),r=a.filter((function(e){return!n.includes(e)}));c(st(r))}c(dt(e.id))}),[c,a,b]),y=Object(n.useCallback)((function(e){c(ut(e))}),[c]),h=Object(n.useCallback)((function(e){c(lt(e))}),[c]);return r.a.createElement(f.d,{flexDirection:"column"},o?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(xt,{groups:s,selectedGroup:l,onSelect:y}),r.a.createElement(xt,{groups:d||[],selectedGroup:i,onSelect:h}),r.a.createElement(f.g,{height:"0.7em"})),r.a.createElement(f.d,{flexWrap:"wrap",wrapMargin:"0.5em"},b.map((function(e){return void 0===e.legend?null:r.a.createElement(Et,{key:e.id,onClick:function(){return g(e)},config:e.legend,active:a.includes(e.id),collapsed:o})}))))},kt=a(36),St=function(e){var t=e.collapsed,a=Object(kt.a)(e,["collapsed"]);return r.a.createElement(f.h,a,r.a.createElement(E.a,{color:"#eee",icon:t?v.n:v.k,fixedWidth:!0}))},Dt=function(e){var t=e.status;return r.a.createElement(f.d,{backgroundColor:"#222",position:"absolute",top:"0",bottom:"0",left:"0",right:"0"},r.a.createElement(f.i,{position:"absolute",margin:"0 auto",top:"50%",zIndex:100,width:"100%",centerAlign:!0,fontSize:"title",color:"#eee"},t.error?"API server failed to respond":"Waiting for API server to wake up..."))},Pt=function(e){var t=e.fillColor,a=e.gradient;return r.a.createElement(f.d,{flexDirection:"column",color:"#222",backgroundColor:"#eee"},r.a.createElement(f.d,{flexDirection:"row"},a.map((function(e){return r.a.createElement(f.d,{key:e.magnitude,height:"1.5rem",width:"1.5rem",backgroundColor:e.color||t,opacity:e.opacity})}))),r.a.createElement(f.d,{flexDirection:"row"},a.map((function(e){return r.a.createElement(f.i,{key:e.magnitude,fontSize:"0.6rem",color:"#222",centerAlign:!0,width:"1.5rem"},(t=e.magnitude)>=1e9?"".concat(t/1e9,"B"):t>=1e6?"".concat(t/1e6,"M"):t>=1e3?"".concat(t/1e3,"k"):t);var t}))))},Lt=function(e){var t=e.activeLayers,a=Object(u.c)((function(e){return e.ui.map.layers})),n=Object(u.c)((function(e){return e.ui.map.selectedLayerGroup})),o=Object(u.c)((function(e){return e.ui.map.map})),c=o?o.getZoom():0,i=a.filter((function(e){return n.layers.includes(e.id)&&t.includes(e.id)&&Object($.get)(e,"legend.gradient")&&$.inRange.apply(void 0,[c].concat(Object(le.a)(Object($.get)(e,"legend.zoomLevels",[Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY]))))})),l=48*i.length;return r.a.createElement(j,{flexDirection:"row",width:"min-content",backgroundColor:"transparent",zIndex:50,position:"absolute",right:"calc(50% - ".concat(l,"px)"),bottom:"0",padding:"0",marginBetween:"1.5em"},i.map((function(e){return r.a.createElement(Pt,{key:e.legend.label,fillColor:e.legend.fillColor,gradient:e.legend.gradient})})))},Nt=a(9),Tt=a.n(Nt),zt=a(18),At=Object(P.c)({name:"usCovidData",initialState:{totals:[{date:void 0,cases:0,deaths:0}],casesByCounty:{},byState:{},stateAndCounty:{},badRecords:[],population:{}},reducers:{load:function(e,t){e.casesByCounty=t.payload,e.stateAndCounty=Object(ee.a)(Object(ee.a)({},e.byState),e.casesByCounty)},addBoundaries:function(e,t){e.casesByCounty=Object(ee.a)(Object(ee.a)({},e.casesByCounty),t.payload),e.stateAndCounty=Object(ee.a)(Object(ee.a)({},e.byState),e.casesByCounty)},addBoundary:function(e,t){var a=t.payload;e.casesByCounty[parseInt(a.properties.FEATURE_ID)]=[{date:void 0,cases:0,deaths:0,county:a.properties.NAME,state:a.properties.STATE}],e.stateAndCounty=Object(ee.a)(Object(ee.a)({},e.byState),e.casesByCounty)},insertStatus:function(e,t){Object.entries(t.payload).forEach((function(t){var a=Object(V.a)(t,2),n=a[0],r=a[1];n in e.casesByCounty?e.casesByCounty[n]=[e.casesByCounty[n][0]].concat(Object(le.a)(r),Object(le.a)(e.casesByCounty[n].slice(1))):e.casesByCounty[n]=r})),e.stateAndCounty=Object(ee.a)(Object(ee.a)({},e.byState),e.casesByCounty)},appendStatus:function(e,t){Object.entries(t.payload).forEach((function(t){var a=Object(V.a)(t,2),n=a[0],r=a[1];n in e.casesByCounty?e.casesByCounty[n]=[].concat(Object(le.a)(e.casesByCounty[n]),Object(le.a)(r)):e.casesByCounty[n]=r}))},appendBadRecords:function(e,t){e.badRecords=t.payload},setTotals:function(e,t){e.totals=[{date:void 0,cases:0,deaths:0}].concat(Object(le.a)(t.payload.data))},setPopulation:function(e,t){var a={};t.payload.population.forEach((function(e){return a["000"===e.COUNTY?parseInt(e.STATE):parseInt(e.FIPS)]=e})),e.population=a},setByState:function(e,t){var a={};t.payload.data.forEach((function(e){var t=parseInt(e.fips);t in a?a[t].push(e):a[t]=[e]})),e.byState=a,e.stateAndCounty=Object(ee.a)(Object(ee.a)({},a),e.casesByCounty)}}}),Mt=At.actions,Yt=(Mt.load,Mt.appendStatus,Mt.insertStatus),Ft=Mt.appendBadRecords,Gt=(Mt.addBoundary,Mt.addBoundaries),Vt=Mt.setTotals,Bt=Mt.setPopulation,Ht=Mt.setByState,_t=At.reducer,Rt=Object(P.c)({name:"worldCovidData",initialState:{byCountry:{},population:{},totals:null},reducers:{load:function(e,t){e.byCountry=t.payload},setPopulation:function(e,t){e.population=t.payload},setTotals:function(e,t){e.totals=t.payload}}}),Wt=Rt.actions,Ut=Wt.load,qt=Wt.setTotals,Zt=Wt.setPopulation,Jt=Rt.reducer,Kt=Object(P.c)({name:"apiServerStatus",initialState:{aliveCheck:{pending:null,error:null,complete:null,success:null,result:null,object:null}},reducers:{aliveCheckPending:function(e){e.aliveCheck={pending:!0,error:null,complete:!1,success:null,result:null,object:null}},aliveCheckPassed:function(e,t){e.aliveCheck={pending:!1,error:!1,complete:!0,success:!0,result:t.payload,object:null}},aliveCheckFailed:function(e,t){e.aliveCheck={pending:!1,error:!0,complete:!0,success:!1,result:t.payload,object:null}}}}),Xt=Kt.actions,Qt=Xt.aliveCheckPending,$t=Xt.aliveCheckPassed,ea=Xt.aliveCheckFailed,ta=Kt.reducer,aa=Object(P.c)({name:"usCasesByCounty",initialState:{pending:null,error:null,complete:null,success:null,result:null,object:null,progress:null},reducers:{requestPending:function(e,t){e.pending=!0,e.error=null,e.complete=!1,e.success=null,e.result=null,e.object=null,e.progress=t.payload||0},requestSucceeded:function(e,t){e.pending=!1,e.error=!1,e.complete=!0,e.success=!0,e.result=t.payload,e.object=null,e.progress=1},requestFailed:function(e,t){e.pending=!1,e.error=!0,e.complete=!0,e.success=!1,e.result=t.payload,e.object=null,e.progress=null}}}),na=aa.actions,ra=na.requestPending,oa=na.requestSucceeded,ca=na.requestFailed,ia=aa.reducer,la=function(){var e=Object(zt.a)(Tt.a.mark((function e(t,a,n){var r,o;return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/us-cases-by-county?startIndex=".concat(t,"&pageSize=").concat(a,"&reverse=").concat(n));case 2:return r=e.sent,e.next=5,r.text();case 5:return","===(o=e.sent)[o.length-4]&&(o=o.slice(0,-4)+o.slice(-3)),e.abrupt("return",JSON.parse(o));case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),sa=function(){var e=Object(zt.a)(Tt.a.mark((function e(){return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/global-covid-totals");case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ua=function(){var e=Object(zt.a)(Tt.a.mark((function e(){return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/us-covid-by-state");case 2:return e.abrupt("return",e.sent.json());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),da=function(){var e=Object(zt.a)(Tt.a.mark((function e(){return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/global-covid-by-country"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pa=function(){var e=Object(zt.a)(Tt.a.mark((function e(){var t;return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/us-totals");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fa=function(){var e=Object(zt.a)(Tt.a.mark((function e(){var t;return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/resources/world-population-est-2019.json");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ma=function(){var e=Object(zt.a)(Tt.a.mark((function e(){var t;return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/resources/us-estimated-population-2019.json");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ba=function(){var e=Object(zt.a)(Tt.a.mark((function e(t){var a;return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/us-counties?resolution=".concat(t));case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ga=function(){var e=Object(zt.a)(Tt.a.mark((function e(){return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/alive"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ya=function(e){var t={};return e.forEach((function(e){var a=e.Country_code;a in t?t[a].push({date:e.Date_reported,cases:e.Cumulative_cases,deaths:e.Cumulative_deaths,newCases:e.New_cases,newDeaths:e.New_deaths,country:e.Country}):t[a]=[{date:e.Date_reported,cases:e.Cumulative_cases,deaths:e.Cumulative_deaths,newCases:e.New_cases,newDeaths:e.New_deaths,country:e.Country}]})),t},ha=function(e){return function(){var t=Object(zt.a)(Tt.a.mark((function t(a){var n,r;return Tt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],r={},e.forEach((function(e){var t=parseInt(e.fips);if(isNaN(t))n.push(e);else{var a=parseInt(e.fips);a in r?r[a].push({date:e.date,cases:e.cases,deaths:e.deaths,county:e.county,state:e.state}):r[a]=[{date:e.date,cases:e.cases,deaths:e.deaths,county:e.county,state:e.state}]}})),a(Yt(r)),a(Ft(n));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},va=a(43),Oa=a.n(va);Oa.a.accessToken="pk.eyJ1IjoicnVva3ZsIiwiYSI6ImNrZDA3NW9oNTBhanYyeXBjOXBjazloazUifQ.qwtn31dojyeKrFMrcRAjBw";var ja=function(e,t){return function(a,n){var r=Object($.findLast)(a,(function(e){return e.date<=n.end})),o=Object($.findLast)(a,(function(t){return t.date<=e}));return{firstCase:Object($.get)(a,[1,"date"])===n.end,hotspot:parseInt(Object($.get)(r,"cases",0))/parseInt(Object($.get)(o,"cases",0))>1.2&&parseInt(Object($.get)(r,"cases",0))>100,perCapitaHotspot:(parseInt(Object($.get)(r,"cases",0))-parseInt(Object($.get)(o,"cases",0)))/parseInt(t)>.01}}},Ea=function(e){return function(t,a){var n=Object($.findLast)(t,(function(e){return e.date<=a.end})),r=a.start?Object($.findLast)(t,(function(e){return e.date<=a.start})):null,o=a.start?parseInt(Object($.get)(r,"cases",0)):0,c=a.start?parseInt(Object($.get)(r,"deaths",0)):0,i=parseInt(Object($.get)(n,"cases",0))-o,l=parseInt(Object($.get)(n,"deaths",0))-c;return{casesPerCapita:e>0?i/e:0,deathsPerCapita:e>0?l/e:0,cases:i,deaths:l,deathRate:l/i,population:e}}},wa=function(e,t,a,n,r,o,c){e.setFeatureState({source:a,sourceLayer:n,id:t},c(r,o))},Ca=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!=a&&e.setFeatureState(Object(ee.a)(Object(ee.a)({},t.source),{},{id:a}),{active:n,hold:r})},xa=function(e){var t=e.sources,a=e.activeLayers,o=e.layers,c=e.date,i=Object(kt.a)(e,["sources","activeLayers","layers","date"]),l=Object(u.b)(),s=Object(u.c)((function(e){return e.ui.map.map})),d=Object(u.c)((function(e){return e.ui.map.sourcesLoadStatus.status===S})),f=Object(u.c)((function(e){return e.core.usCovidData.population})),m=Object(u.c)((function(e){return e.core.worldCovidData.population})),b=Object(u.c)((function(e){return e.ui.map.selectedLayerGroup})),g=Object(u.c)((function(e){return e.core.usCovidData.stateAndCounty})),y=Object(u.c)((function(e){return e.core.worldCovidData.byCountry})),h="world"===Object(u.c)((function(e){return e.ui.map.activeView})).name.toLowerCase()?m:f,v=Object(n.useRef)(null),O=a.filter((function(e){return b.layers.includes(e)}));return Object(n.useEffect)((function(){s&&d&&o.forEach((function(e){s.getLayer(e.id)&&s.setLayoutProperty(e.id,"visibility",O.includes(e.id)&&y&&g?"visible":"none")}))}),[s,d,o,O,y,g]),Object(n.useEffect)((function(){l(nt());var e=new Oa.a.Map({container:v.current,style:"mapbox://styles/mapbox/light-v10",center:[-95,39],zoom:3,minZoom:3,maxPitch:0,dragRotate:!1,touchPitch:!1,pitchWithRotate:!1});e.dragRotate.disable(),e.touchZoomRotate.disableRotation(),l(rt(e))}),[l]),Object(n.useEffect)((function(){s&&s.on("load",Object(zt.a)(Tt.a.mark((function e(){var a;return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(ot()),l(ct()),e.next=4,Promise.all([new Promise((function(e,t){return s.loadImage("/img/coronavirus-green-128.png",(function(a,n){a&&t(a),s.addImage("corona-green",n),e()}))})),new Promise((function(e,t){return s.loadImage("/img/coronavirus-red-128.png",(function(a,n){a&&t(a),s.addImage("corona-red",n),e()}))}))]);case 4:t.forEach((function(e){return s.addSource(e.id,e.config)})),a=function e(){t.reduce((function(e,t){return e&&s.isSourceLoaded(t.id)}),!0)&&(s.off("sourcedata",e),l(it()))},s.on("sourcedata",a);case 7:case"end":return e.stop()}}),e)}))))}),[s,t,o,l]),Object(n.useEffect)((function(){s&&d&&o.forEach((function(e){s.getLayer(e.id)&&s.removeLayer(e.id),s.addLayer(e),s.setLayoutProperty(e.id,"visibility","none")}))}),[o,s,d]),Object(n.useEffect)((function(){if(d&&y)for(var e=0,t=Object.entries(y);e<t.length;e++){var a=Object(V.a)(t[e],2),n=a[0],r=a[1];wa.apply(void 0,[s,n].concat(Object(le.a)(Object.values(Fe)),[r,c,Ea(parseInt(Object($.get)(h,[n,"POPESTIMATE2019"],0)))]))}}),[d,c,y,s,h]),Object(n.useEffect)((function(){if(d&&g)for(var e=p()(c.end).subtract(2,"weeks").format("YYYY-MM-DD"),t=0,a=Object.entries(g);t<a.length;t++){var n=Object(V.a)(a[t],2),r=n[0],o=n[1];r.length<=2?wa.apply(void 0,[s,r].concat(Object(le.a)(Object.values(Ge)),[o,c,Ea(parseInt(Object($.get)(h,[r,"POPESTIMATE2019"],0)))])):(wa.apply(void 0,[s,r].concat(Object(le.a)(Object.values(Ve)),[o,c,Ea(parseInt(Object($.get)(h,[r,"POPESTIMATE2019"],0)))])),wa(s,r,"us-county-centroids",void 0,o,c,ja(e,parseInt(Object($.get)(h,[r,"POPESTIMATE2019"],0)))))}}),[d,c,g,s,h]),Object(n.useEffect)((function(){var e=null,t=null,a=function(t,a,n,r){n!==e&&(Ca(t,a,e,!1,r),e=n,l(at(n))),null!=n&&Ca(t,a,n,!0,r)},n=function(e){return function(n){if(s&&d&&!t&&n.features.length>0){var r=n.features.find((function(t){return t.layer.id===e.layer}));a(s,e,r.id)}}},r=function(e){return function(){s&&d&&!t&&a(s,e,null)}},o=[];return Be.forEach((function(c){if(s&&d){var i={event:"mouseup",layer:c.layer,handler:(u=c,function(n){if(s&&d){var r=n.features.find((function(e){return e.layer.id===u.layer}));void 0===r.id?(a(s,u,null,!1),l(et(!1)),t=!1):e!==r.id?(a(s,u,r.id,!0),l(et(!0)),t=!0):(a(s,u,r.id,!t),l(et(!t)),t=!t)}})};s.on(i.event,i.layer,i.handler),o.push(Object(ee.a)({},i)),i={event:"mousemove",layer:c.layer,handler:n(c)},s.on(i.event,i.layer,i.handler),o.push(Object(ee.a)({},i)),i={event:"mouseleave",layer:c.layer,handler:r(c)},s.on(i.event,i.layer,i.handler),o.push(Object(ee.a)({},i))}var u})),function(){o.forEach((function(e){s.off(e.event,e.layer,e.handler)}))}}),[s,d,l]),r.a.createElement("div",Object.assign({ref:v},i))};function Ia(){var e=Object(m.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n"]);return Ia=function(){return e},e}var ka=Object(b.a)(xa)(Ia());var Sa=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.core.apiServerStatus.aliveCheck})),a=Object(u.c)((function(e){return e.ui.controlPanel.collapsed})),o=Object(u.c)((function(e){return e.ui.controlPanel.showAbout})),c=Object(u.c)((function(e){return e.ui.controlPanel.layersHidden})),l=Object(u.c)((function(e){return e.core.time.current})),s=Object(u.c)((function(e){return e.core.time.duration})),d=Object(u.c)((function(e){return e.ui.map.activeLayers}));Object(n.useEffect)((function(){i.a.pageview(window.location.pathname+window.location.search)}),[]);var m=Object(n.useMemo)((function(){return p()(l,"x")}),[l]),b=Object(n.useMemo)((function(){return{start:s?p()(m).subtract(s).format("YYYY-MM-DD"):null,end:m.format("YYYY-MM-DD")}}),[m,s]),g=Object(n.useCallback)((function(t){e(Y(t))}),[e]);return Object(n.useEffect)((function(){e(function(){var e=Object(zt.a)(Tt.a.mark((function e(t){var a,n,r,o,c,i,l,s,u,d,p,f,m,b;return Tt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,n=0,r=1e12,t(Qt()),e.prev=4,e.next=7,ga();case 7:if(!(o=e.sent).ok){e.next=18;break}return e.t0=t,e.t1=$t,e.next=13,o.text();case 13:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3),e.next=19;break;case 18:t(ea(o.error(o.error())));case 19:e.next=24;break;case 21:e.prev=21,e.t4=e.catch(4),t(ea(e.t4));case 24:return c=pa(),i=ma(),l=da(),s=fa(),u=sa(),d=ua(),e.next=32,ba("20m");case 32:return p=e.sent,f={},p.features.forEach((function(e){f[parseInt(e.properties.FEATURE_ID)]=[{date:void 0,cases:0,deaths:0,county:e.properties.NAME,state:e.properties.STATE}]})),t(Gt(f)),e.t5=t,e.t6=Ut,e.t7=ya,e.next=41,l;case 41:return e.next=43,e.sent.json();case 43:return e.t8=e.sent.data,e.t9=(0,e.t7)(e.t8),e.t10=(0,e.t6)(e.t9),(0,e.t5)(e.t10),e.t11=t,e.t12=Ht,e.next=51,d;case 51:return e.t13=e.sent,e.t14=(0,e.t12)(e.t13),(0,e.t11)(e.t14),e.t15=t,e.t16=Vt,e.next=58,c;case 58:return e.t17=e.sent,e.t18=(0,e.t16)(e.t17),(0,e.t15)(e.t18),e.t19=t,e.t20=Bt,e.next=65,i;case 65:return e.t21=e.sent,e.t22=(0,e.t20)(e.t21),(0,e.t19)(e.t22),e.t23=t,e.t24=qt,e.next=72,u;case 72:return e.t25=e.sent,e.t26=(0,e.t24)(e.t25),(0,e.t23)(e.t26),e.t27=t,e.t28=Zt,e.next=79,s;case 79:e.t29=e.sent,e.t30=(0,e.t28)(e.t29),(0,e.t27)(e.t30),e.prev=82,t(ra(0));case 84:if(a){e.next=96;break}return e.next=87,la(n,r,!0);case 87:m=e.sent,b=m.data||m,t(ha(b)),a=b.length<r,n+=r,r*=2,a||t(ra(n/Object($.get)(m,"meta.totalCount",NaN))),e.next=84;break;case 96:t(oa()),e.next=102;break;case 99:e.prev=99,e.t31=e.catch(82),t(ca(e.t31));case 102:case"end":return e.stop()}}),e,null,[[4,21],[82,99]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),t.success?r.a.createElement(r.a.Fragment,null,r.a.createElement(G,{layers:Ze,activeLayers:d,date:m,onShowAbout:function(){return g(!0)}}),r.a.createElement(ka,{date:b,sources:Ue,layers:Ze,activeLayers:d}),a||c?r.a.createElement(Lt,{activeLayers:d}):null,o?r.a.createElement(f.d,{position:"absolute",zIndex:100,maxHeight:"100%"},r.a.createElement(h,{onHide:function(){return g(!1)}})):null):r.a.createElement(Dt,{status:t})},Da=console;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));console,console;var Pa=a(19),La=Object(Pa.c)({usCovidData:_t,worldCovidData:Jt,time:X,apiServerStatus:ta}),Na=Object(Pa.c)({map:pt,controlPanel:F}),Ta=Object(Pa.c)({usCasesByCounty:ia}),za=Object(Pa.c)({core:La,ui:Na,request:Ta});var Aa=function(e){var t={reducer:za,middleware:Object(le.a)(Object(P.d)({serializableCheck:!1,immutableCheck:!1})),preloadedState:e,enhancers:[],devTools:{actionSanitizer:function(e){return function(e){return"usCovidData/insertStatus"===e.type||"usCovidData/appendBadRecords"===e.type||"usCovidData/addBoundaries"===e.type||"usCovidData/setTotals"===e.type||"usCovidData/setPopulation"===e.type||"worldCovidData/load"===e.type||"worldCovidData/setTotals"===e.type||"worldCovidData/setPopulation"===e.type?Object(ee.a)(Object(ee.a)({},e),{},{payload:{keys:Object.keys(e.payload),length:Object($.get)(Object.keys(e.payload),"length")}}):e}(e)},stateSanitizer:function(e){return function(e){var t=e.ui;if(e.ui.map.map){var a=Object(ee.a)(Object(ee.a)({},e.ui.map),{},{map:"<<MAP_OBJECT>>"});t=Object(ee.a)(Object(ee.a)({},e.ui),{},{map:a})}var n=Object(ee.a)({},e.core);if(e.core.worldCovidData){var r=Object(ee.a)(Object(ee.a)({},e.core.worldCovidData),{},{byCountry:{keys:Object.keys(Object($.get)(e,"core.worldCovidData.byCountry"))},population:{keys:Object.keys(Object($.get)(e,"core.worldCovidData.population"))},totals:{length:Object($.get)(e,"core.worldCovidData.totals.length")}});n.worldCovidData=Object(ee.a)({},r)}if(e.core.usCovidData){var o=Object(ee.a)(Object(ee.a)({},e.core.usCovidData),{},{casesByCounty:{keys:Object.keys(Object($.get)(e,"core.usCovidData.casesByCounty"))},byState:{keys:Object.keys(Object($.get)(e,"core.usCovidData.byState"))},stateAndCounty:{keys:Object.keys(Object($.get)(e,"core.usCovidData.stateAndCounty"))},badRecords:{length:Object($.get)(e,"core.usCovidData.badRecords.length")},totals:{length:Object($.get)(e,"core.usCovidData.totals.length")},population:{keys:Object.keys(Object($.get)(e,"core.usCovidData.population"))}});n.usCovidData=Object(ee.a)({},o)}return Object(ee.a)(Object(ee.a)({},e),{},{core:n,ui:t})}(e)}}};return Object(P.a)(t)}();Aa.dispatch((function(e){return window.requestAnimationFrame((function(t){return e(function e(t,a){return function(n,r){var o=r().core.time,c=100;o.pause||(c=0,a||(a=t),n(Z(t-a))),window.requestAnimationFrame((function(a){return setTimeout((function(){return n(e(a,t))}),c)}))}}(t))}))})),i.a.initialize("UA-55310450-2"),s.a.initialize({gtmId:"GTM-W923ZS3"}),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:Aa},r.a.createElement(Sa,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){Da.error(e.message)}))}},[[105,1,2]]]);
//# sourceMappingURL=main.b7330e91.chunk.js.map